{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/* eslint-disable no-param-reassign */\n\n\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport RawCSSMotion from \"rc-animate/es/CSSMotion\";\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\nvar CSSMotion = RawCSSMotion;\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable'\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // ================== Align ==================\n\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          visible: mergedPopupVisible,\n          hiddenClassName: hiddenClassName,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n      } else if (visible !== prevVisible) {\n        if (visible || supportMotion(mergedMotion) && ['motion', 'AfterMotion', 'stable'].includes(status)) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */","map":{"version":3,"sources":["/Users/yesh/Documents/WritePrograms/Process-Drift-Visualization-With-Declare/client/node_modules/rc-trigger/es/Popup.js"],"names":["_objectWithoutProperties","_defineProperty","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","React","Component","raf","Align","composeRef","classNames","RawCSSMotion","PopupInner","getMotion","CSSMotion","supportMotion","motion","motionName","Popup","_Component","_super","_this","state","targetWidth","undefined","targetHeight","status","prevVisible","alignClassName","popupRef","createRef","alignRef","nextFrameState","nextFrameId","onAlign","popupDomNode","align","_this$props","props","getClassNameFromAlign","setState","current","forceAlign","onMotionEnd","visible","setStateOnNextFrame","cancelFrameState","submitState","getAlignTarget","_this$props2","point","getRootDomNode","cancel","renderPopupElement","_this$state","_this$props3","prefixCls","className","style","stretch","destroyPopupOnHide","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","children","mergedClassName","hiddenClassName","concat","sizeStyle","indexOf","height","minHeight","width","minWidth","mergedStyle","getZIndexStyle","opacity","mergedMotion","mergedMotionVisible","motionAppear","motionEnter","motionLeave","mergedAlignDisabled","mergedPopupVisible","createElement","assign","removeOnLeave","onEnterEnd","onLeaveEnd","_ref","motionRef","motionStyle","motionClassName","ref","monitorWindowResize","disabled","renderMaskElement","_this$props4","mask","maskMotion","maskTransitionName","maskAnimation","transitionName","animation","_ref2","value","componentDidMount","componentDidUpdate","_this$props5","queue","index","nextStatus","$ele","offsetHeight","offsetWidth","componentWillUnmount","zIndex","render","getDerivedStateFromProps","_ref3","_ref4","newState","includes"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/* eslint-disable no-param-reassign */\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport RawCSSMotion from \"rc-animate/es/CSSMotion\";\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\nvar CSSMotion = RawCSSMotion;\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable'\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // ================== Align ==================\n\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          visible: mergedPopupVisible,\n          hiddenClassName: hiddenClassName,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n      } else if (visible !== prevVisible) {\n        if (visible || supportMotion(mergedMotion) && ['motion', 'AfterMotion', 'stable'].includes(status)) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */"]},"metadata":{},"sourceType":"module"}