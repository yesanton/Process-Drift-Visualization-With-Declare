{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport KeywordTrigger from './KeywordTrigger';\nimport { MentionsContextProvider } from './MentionsContext';\nimport Option from './Option';\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, omit, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from './util';\n\nvar Mentions = /*#__PURE__*/function (_React$Component) {\n  _inherits(Mentions, _React$Component);\n\n  function Mentions(props) {\n    var _this;\n\n    _classCallCheck(this, Mentions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mentions).call(this, props));\n    _this.focusId = undefined;\n\n    _this.triggerChange = function (value) {\n      var onChange = _this.props.onChange;\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      if (onChange) {\n        onChange(value);\n      }\n    };\n\n    _this.onChange = function (_ref) {\n      var value = _ref.target.value;\n\n      _this.triggerChange(value);\n    }; // Check if hit the measure keyword\n\n\n    _this.onKeyDown = function (event) {\n      var which = event.which;\n      var _this$state = _this.state,\n          activeIndex = _this$state.activeIndex,\n          measuring = _this$state.measuring; // Skip if not measuring\n\n      if (!measuring) {\n        return;\n      }\n\n      if (which === KeyCode.UP || which === KeyCode.DOWN) {\n        // Control arrow function\n        var optionLen = _this.getOptions().length;\n\n        var offset = which === KeyCode.UP ? -1 : 1;\n        var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n\n        _this.setState({\n          activeIndex: newActiveIndex\n        });\n\n        event.preventDefault();\n      } else if (which === KeyCode.ESC) {\n        _this.stopMeasure();\n      } else if (which === KeyCode.ENTER) {\n        // Measure hit\n        var option = _this.getOptions()[activeIndex];\n\n        _this.selectOption(option);\n\n        event.preventDefault();\n      }\n    };\n    /**\n     * When to start measure:\n     * 1. When user press `prefix`\n     * 2. When measureText !== prevMeasureText\n     *  - If measure hit\n     *  - If measuring\n     *\n     * When to stop measure:\n     * 1. Selection is out of range\n     * 2. Contains `space`\n     * 3. ESC or select one\n     */\n\n\n    _this.onKeyUp = function (event) {\n      var key = event.key,\n          which = event.which;\n      var _this$state2 = _this.state,\n          prevMeasureText = _this$state2.measureText,\n          measuring = _this$state2.measuring;\n      var _this$props = _this.props,\n          _this$props$prefix = _this$props.prefix,\n          prefix = _this$props$prefix === void 0 ? '' : _this$props$prefix,\n          onSearch = _this$props.onSearch,\n          validateSearch = _this$props.validateSearch;\n      var target = event.target;\n      var selectionStartText = getBeforeSelectionText(target);\n\n      var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, prefix),\n          measureIndex = _getLastMeasureIndex.location,\n          measurePrefix = _getLastMeasureIndex.prefix; // Skip if match the white key list\n\n\n      if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n        return;\n      }\n\n      if (measureIndex !== -1) {\n        var measureText = selectionStartText.slice(measureIndex + measurePrefix.length);\n        var validateMeasure = validateSearch(measureText, _this.props);\n        var matchOption = !!_this.getOptions(measureText).length;\n\n        if (validateMeasure) {\n          if (key === measurePrefix || measuring || measureText !== prevMeasureText && matchOption) {\n            _this.startMeasure(measureText, measurePrefix, measureIndex);\n          }\n        } else if (measuring) {\n          // Stop if measureText is invalidate\n          _this.stopMeasure();\n        }\n        /**\n         * We will trigger `onSearch` to developer since they may use for async update.\n         * If met `space` means user finished searching.\n         */\n\n\n        if (onSearch && validateMeasure) {\n          onSearch(measureText, measurePrefix);\n        }\n      } else if (measuring) {\n        _this.stopMeasure();\n      }\n    };\n\n    _this.onInputFocus = function (event) {\n      _this.onFocus(event);\n    };\n\n    _this.onInputBlur = function (event) {\n      _this.onBlur(event);\n    };\n\n    _this.onDropdownFocus = function () {\n      _this.onFocus();\n    };\n\n    _this.onDropdownBlur = function () {\n      _this.onBlur();\n    };\n\n    _this.onFocus = function (event) {\n      window.clearTimeout(_this.focusId);\n      var isFocus = _this.state.isFocus;\n      var onFocus = _this.props.onFocus;\n\n      if (!isFocus && event && onFocus) {\n        onFocus(event);\n      }\n\n      _this.setState({\n        isFocus: true\n      });\n    };\n\n    _this.onBlur = function (event) {\n      _this.focusId = window.setTimeout(function () {\n        var onBlur = _this.props.onBlur;\n\n        _this.setState({\n          isFocus: false\n        });\n\n        _this.stopMeasure();\n\n        if (onBlur) {\n          onBlur(event);\n        }\n      }, 0);\n    };\n\n    _this.selectOption = function (option) {\n      var _this$state3 = _this.state,\n          value = _this$state3.value,\n          measureLocation = _this$state3.measureLocation,\n          measurePrefix = _this$state3.measurePrefix;\n      var _this$props2 = _this.props,\n          split = _this$props2.split,\n          onSelect = _this$props2.onSelect;\n      var _option$value = option.value,\n          mentionValue = _option$value === void 0 ? '' : _option$value;\n\n      var _replaceWithMeasure = replaceWithMeasure(value, {\n        measureLocation: measureLocation,\n        targetText: mentionValue,\n        prefix: measurePrefix,\n        selectionStart: _this.textarea.selectionStart,\n        split: split\n      }),\n          text = _replaceWithMeasure.text,\n          selectionLocation = _replaceWithMeasure.selectionLocation;\n\n      _this.triggerChange(text);\n\n      _this.stopMeasure(function () {\n        // We need restore the selection position\n        setInputSelection(_this.textarea, selectionLocation);\n      });\n\n      if (onSelect) {\n        onSelect(option, measurePrefix);\n      }\n    };\n\n    _this.setActiveIndex = function (activeIndex) {\n      _this.setState({\n        activeIndex: activeIndex\n      });\n    };\n\n    _this.setTextAreaRef = function (element) {\n      _this.textarea = element;\n    };\n\n    _this.setMeasureRef = function (element) {\n      _this.measure = element;\n    };\n\n    _this.getOptions = function (measureText) {\n      var targetMeasureText = measureText || _this.state.measureText || '';\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          filterOption = _this$props3.filterOption;\n      var list = toArray(children).map(function (_ref2) {\n        var props = _ref2.props;\n        return props;\n      }).filter(function (option) {\n        /** Return all result if `filterOption` is false. */\n        if (filterOption === false) {\n          return true;\n        }\n\n        return filterOption(targetMeasureText, option);\n      });\n      return list;\n    };\n\n    _this.state = {\n      value: props.defaultValue || props.value || '',\n      measuring: false,\n      measureLocation: 0,\n      measureText: null,\n      measurePrefix: '',\n      activeIndex: 0,\n      isFocus: false\n    };\n    return _this;\n  }\n\n  _createClass(Mentions, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var measuring = this.state.measuring; // Sync measure div top with textarea for rc-trigger usage\n\n      if (measuring) {\n        this.measure.scrollTop = this.textarea.scrollTop;\n      }\n    }\n  }, {\n    key: \"startMeasure\",\n    value: function startMeasure(measureText, measurePrefix, measureLocation) {\n      this.setState({\n        measuring: true,\n        measureText: measureText,\n        measurePrefix: measurePrefix,\n        measureLocation: measureLocation,\n        activeIndex: 0\n      });\n    }\n  }, {\n    key: \"stopMeasure\",\n    value: function stopMeasure(callback) {\n      this.setState({\n        measuring: false,\n        measureLocation: 0,\n        measureText: null\n      }, callback);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.textarea.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.textarea.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          value = _this$state4.value,\n          measureLocation = _this$state4.measureLocation,\n          measurePrefix = _this$state4.measurePrefix,\n          measuring = _this$state4.measuring,\n          activeIndex = _this$state4.activeIndex;\n\n      var _this$props4 = this.props,\n          prefixCls = _this$props4.prefixCls,\n          placement = _this$props4.placement,\n          direction = _this$props4.direction,\n          transitionName = _this$props4.transitionName,\n          className = _this$props4.className,\n          style = _this$props4.style,\n          autoFocus = _this$props4.autoFocus,\n          notFoundContent = _this$props4.notFoundContent,\n          getPopupContainer = _this$props4.getPopupContainer,\n          restProps = _objectWithoutProperties(_this$props4, [\"prefixCls\", \"placement\", \"direction\", \"transitionName\", \"className\", \"style\", \"autoFocus\", \"notFoundContent\", \"getPopupContainer\"]);\n\n      var inputProps = omit(restProps, 'value', 'defaultValue', 'prefix', 'split', 'children', 'validateSearch', 'filterOption', 'onSelect', 'onSearch');\n      var options = measuring ? this.getOptions() : [];\n      return React.createElement(\"div\", {\n        className: classNames(prefixCls, className),\n        style: style\n      }, React.createElement(\"textarea\", Object.assign({\n        autoFocus: autoFocus,\n        ref: this.setTextAreaRef,\n        value: value\n      }, inputProps, {\n        onChange: this.onChange,\n        onKeyDown: this.onKeyDown,\n        onKeyUp: this.onKeyUp,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur\n      })), measuring && React.createElement(\"div\", {\n        ref: this.setMeasureRef,\n        className: \"\".concat(prefixCls, \"-measure\")\n      }, value.slice(0, measureLocation), React.createElement(MentionsContextProvider, {\n        value: {\n          notFoundContent: notFoundContent,\n          activeIndex: activeIndex,\n          setActiveIndex: this.setActiveIndex,\n          selectOption: this.selectOption,\n          onFocus: this.onDropdownFocus,\n          onBlur: this.onDropdownBlur\n        }\n      }, React.createElement(KeywordTrigger, {\n        prefixCls: prefixCls,\n        transitionName: transitionName,\n        placement: placement,\n        direction: direction,\n        options: options,\n        visible: true,\n        getPopupContainer: getPopupContainer\n      }, React.createElement(\"span\", null, measurePrefix))), value.slice(measureLocation + measurePrefix.length)));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, prevState) {\n      var newState = {};\n\n      if ('value' in props && props.value !== prevState.value) {\n        newState.value = props.value || '';\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Mentions;\n}(React.Component);\n\nMentions.Option = Option;\nMentions.defaultProps = {\n  prefixCls: 'rc-mentions',\n  prefix: '@',\n  split: ' ',\n  validateSearch: defaultValidateSearch,\n  filterOption: defaultFilterOption,\n  notFoundContent: 'Not Found',\n  rows: 1\n};\nexport default Mentions;","map":{"version":3,"sources":["/Users/yesh/Documents/WritePrograms/Process-Drift-Visualization-With-Declare/client/node_modules/rc-mentions/es/Mentions.js"],"names":["_objectWithoutProperties","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","classNames","toArray","KeyCode","React","KeywordTrigger","MentionsContextProvider","Option","filterOption","defaultFilterOption","getBeforeSelectionText","getLastMeasureIndex","omit","replaceWithMeasure","setInputSelection","validateSearch","defaultValidateSearch","Mentions","_React$Component","props","_this","call","focusId","undefined","triggerChange","value","onChange","setState","_ref","target","onKeyDown","event","which","_this$state","state","activeIndex","measuring","UP","DOWN","optionLen","getOptions","length","offset","newActiveIndex","preventDefault","ESC","stopMeasure","ENTER","option","selectOption","onKeyUp","key","_this$state2","prevMeasureText","measureText","_this$props","_this$props$prefix","prefix","onSearch","selectionStartText","_getLastMeasureIndex","measureIndex","location","measurePrefix","indexOf","slice","validateMeasure","matchOption","startMeasure","onInputFocus","onFocus","onInputBlur","onBlur","onDropdownFocus","onDropdownBlur","window","clearTimeout","isFocus","setTimeout","_this$state3","measureLocation","_this$props2","split","onSelect","_option$value","mentionValue","_replaceWithMeasure","targetText","selectionStart","textarea","text","selectionLocation","setActiveIndex","setTextAreaRef","element","setMeasureRef","measure","targetMeasureText","_this$props3","children","list","map","_ref2","filter","defaultValue","componentDidUpdate","scrollTop","callback","focus","blur","render","_this$state4","_this$props4","prefixCls","placement","direction","transitionName","className","style","autoFocus","notFoundContent","getPopupContainer","restProps","inputProps","options","createElement","Object","assign","ref","concat","visible","getDerivedStateFromProps","prevState","newState","Component","defaultProps","rows"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport classNames from 'classnames';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport KeywordTrigger from './KeywordTrigger';\nimport { MentionsContextProvider } from './MentionsContext';\nimport Option from './Option';\nimport { filterOption as defaultFilterOption, getBeforeSelectionText, getLastMeasureIndex, omit, replaceWithMeasure, setInputSelection, validateSearch as defaultValidateSearch } from './util';\n\nvar Mentions =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Mentions, _React$Component);\n\n  function Mentions(props) {\n    var _this;\n\n    _classCallCheck(this, Mentions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Mentions).call(this, props));\n    _this.focusId = undefined;\n\n    _this.triggerChange = function (value) {\n      var onChange = _this.props.onChange;\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      if (onChange) {\n        onChange(value);\n      }\n    };\n\n    _this.onChange = function (_ref) {\n      var value = _ref.target.value;\n\n      _this.triggerChange(value);\n    }; // Check if hit the measure keyword\n\n\n    _this.onKeyDown = function (event) {\n      var which = event.which;\n      var _this$state = _this.state,\n          activeIndex = _this$state.activeIndex,\n          measuring = _this$state.measuring; // Skip if not measuring\n\n      if (!measuring) {\n        return;\n      }\n\n      if (which === KeyCode.UP || which === KeyCode.DOWN) {\n        // Control arrow function\n        var optionLen = _this.getOptions().length;\n\n        var offset = which === KeyCode.UP ? -1 : 1;\n        var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n\n        _this.setState({\n          activeIndex: newActiveIndex\n        });\n\n        event.preventDefault();\n      } else if (which === KeyCode.ESC) {\n        _this.stopMeasure();\n      } else if (which === KeyCode.ENTER) {\n        // Measure hit\n        var option = _this.getOptions()[activeIndex];\n\n        _this.selectOption(option);\n\n        event.preventDefault();\n      }\n    };\n    /**\n     * When to start measure:\n     * 1. When user press `prefix`\n     * 2. When measureText !== prevMeasureText\n     *  - If measure hit\n     *  - If measuring\n     *\n     * When to stop measure:\n     * 1. Selection is out of range\n     * 2. Contains `space`\n     * 3. ESC or select one\n     */\n\n\n    _this.onKeyUp = function (event) {\n      var key = event.key,\n          which = event.which;\n      var _this$state2 = _this.state,\n          prevMeasureText = _this$state2.measureText,\n          measuring = _this$state2.measuring;\n      var _this$props = _this.props,\n          _this$props$prefix = _this$props.prefix,\n          prefix = _this$props$prefix === void 0 ? '' : _this$props$prefix,\n          onSearch = _this$props.onSearch,\n          validateSearch = _this$props.validateSearch;\n      var target = event.target;\n      var selectionStartText = getBeforeSelectionText(target);\n\n      var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, prefix),\n          measureIndex = _getLastMeasureIndex.location,\n          measurePrefix = _getLastMeasureIndex.prefix; // Skip if match the white key list\n\n\n      if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n        return;\n      }\n\n      if (measureIndex !== -1) {\n        var measureText = selectionStartText.slice(measureIndex + measurePrefix.length);\n        var validateMeasure = validateSearch(measureText, _this.props);\n        var matchOption = !!_this.getOptions(measureText).length;\n\n        if (validateMeasure) {\n          if (key === measurePrefix || measuring || measureText !== prevMeasureText && matchOption) {\n            _this.startMeasure(measureText, measurePrefix, measureIndex);\n          }\n        } else if (measuring) {\n          // Stop if measureText is invalidate\n          _this.stopMeasure();\n        }\n        /**\n         * We will trigger `onSearch` to developer since they may use for async update.\n         * If met `space` means user finished searching.\n         */\n\n\n        if (onSearch && validateMeasure) {\n          onSearch(measureText, measurePrefix);\n        }\n      } else if (measuring) {\n        _this.stopMeasure();\n      }\n    };\n\n    _this.onInputFocus = function (event) {\n      _this.onFocus(event);\n    };\n\n    _this.onInputBlur = function (event) {\n      _this.onBlur(event);\n    };\n\n    _this.onDropdownFocus = function () {\n      _this.onFocus();\n    };\n\n    _this.onDropdownBlur = function () {\n      _this.onBlur();\n    };\n\n    _this.onFocus = function (event) {\n      window.clearTimeout(_this.focusId);\n      var isFocus = _this.state.isFocus;\n      var onFocus = _this.props.onFocus;\n\n      if (!isFocus && event && onFocus) {\n        onFocus(event);\n      }\n\n      _this.setState({\n        isFocus: true\n      });\n    };\n\n    _this.onBlur = function (event) {\n      _this.focusId = window.setTimeout(function () {\n        var onBlur = _this.props.onBlur;\n\n        _this.setState({\n          isFocus: false\n        });\n\n        _this.stopMeasure();\n\n        if (onBlur) {\n          onBlur(event);\n        }\n      }, 0);\n    };\n\n    _this.selectOption = function (option) {\n      var _this$state3 = _this.state,\n          value = _this$state3.value,\n          measureLocation = _this$state3.measureLocation,\n          measurePrefix = _this$state3.measurePrefix;\n      var _this$props2 = _this.props,\n          split = _this$props2.split,\n          onSelect = _this$props2.onSelect;\n      var _option$value = option.value,\n          mentionValue = _option$value === void 0 ? '' : _option$value;\n\n      var _replaceWithMeasure = replaceWithMeasure(value, {\n        measureLocation: measureLocation,\n        targetText: mentionValue,\n        prefix: measurePrefix,\n        selectionStart: _this.textarea.selectionStart,\n        split: split\n      }),\n          text = _replaceWithMeasure.text,\n          selectionLocation = _replaceWithMeasure.selectionLocation;\n\n      _this.triggerChange(text);\n\n      _this.stopMeasure(function () {\n        // We need restore the selection position\n        setInputSelection(_this.textarea, selectionLocation);\n      });\n\n      if (onSelect) {\n        onSelect(option, measurePrefix);\n      }\n    };\n\n    _this.setActiveIndex = function (activeIndex) {\n      _this.setState({\n        activeIndex: activeIndex\n      });\n    };\n\n    _this.setTextAreaRef = function (element) {\n      _this.textarea = element;\n    };\n\n    _this.setMeasureRef = function (element) {\n      _this.measure = element;\n    };\n\n    _this.getOptions = function (measureText) {\n      var targetMeasureText = measureText || _this.state.measureText || '';\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          filterOption = _this$props3.filterOption;\n      var list = toArray(children).map(function (_ref2) {\n        var props = _ref2.props;\n        return props;\n      }).filter(function (option) {\n        /** Return all result if `filterOption` is false. */\n        if (filterOption === false) {\n          return true;\n        }\n\n        return filterOption(targetMeasureText, option);\n      });\n      return list;\n    };\n\n    _this.state = {\n      value: props.defaultValue || props.value || '',\n      measuring: false,\n      measureLocation: 0,\n      measureText: null,\n      measurePrefix: '',\n      activeIndex: 0,\n      isFocus: false\n    };\n    return _this;\n  }\n\n  _createClass(Mentions, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var measuring = this.state.measuring; // Sync measure div top with textarea for rc-trigger usage\n\n      if (measuring) {\n        this.measure.scrollTop = this.textarea.scrollTop;\n      }\n    }\n  }, {\n    key: \"startMeasure\",\n    value: function startMeasure(measureText, measurePrefix, measureLocation) {\n      this.setState({\n        measuring: true,\n        measureText: measureText,\n        measurePrefix: measurePrefix,\n        measureLocation: measureLocation,\n        activeIndex: 0\n      });\n    }\n  }, {\n    key: \"stopMeasure\",\n    value: function stopMeasure(callback) {\n      this.setState({\n        measuring: false,\n        measureLocation: 0,\n        measureText: null\n      }, callback);\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.textarea.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.textarea.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          value = _this$state4.value,\n          measureLocation = _this$state4.measureLocation,\n          measurePrefix = _this$state4.measurePrefix,\n          measuring = _this$state4.measuring,\n          activeIndex = _this$state4.activeIndex;\n\n      var _this$props4 = this.props,\n          prefixCls = _this$props4.prefixCls,\n          placement = _this$props4.placement,\n          direction = _this$props4.direction,\n          transitionName = _this$props4.transitionName,\n          className = _this$props4.className,\n          style = _this$props4.style,\n          autoFocus = _this$props4.autoFocus,\n          notFoundContent = _this$props4.notFoundContent,\n          getPopupContainer = _this$props4.getPopupContainer,\n          restProps = _objectWithoutProperties(_this$props4, [\"prefixCls\", \"placement\", \"direction\", \"transitionName\", \"className\", \"style\", \"autoFocus\", \"notFoundContent\", \"getPopupContainer\"]);\n\n      var inputProps = omit(restProps, 'value', 'defaultValue', 'prefix', 'split', 'children', 'validateSearch', 'filterOption', 'onSelect', 'onSearch');\n      var options = measuring ? this.getOptions() : [];\n      return React.createElement(\"div\", {\n        className: classNames(prefixCls, className),\n        style: style\n      }, React.createElement(\"textarea\", Object.assign({\n        autoFocus: autoFocus,\n        ref: this.setTextAreaRef,\n        value: value\n      }, inputProps, {\n        onChange: this.onChange,\n        onKeyDown: this.onKeyDown,\n        onKeyUp: this.onKeyUp,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur\n      })), measuring && React.createElement(\"div\", {\n        ref: this.setMeasureRef,\n        className: \"\".concat(prefixCls, \"-measure\")\n      }, value.slice(0, measureLocation), React.createElement(MentionsContextProvider, {\n        value: {\n          notFoundContent: notFoundContent,\n          activeIndex: activeIndex,\n          setActiveIndex: this.setActiveIndex,\n          selectOption: this.selectOption,\n          onFocus: this.onDropdownFocus,\n          onBlur: this.onDropdownBlur\n        }\n      }, React.createElement(KeywordTrigger, {\n        prefixCls: prefixCls,\n        transitionName: transitionName,\n        placement: placement,\n        direction: direction,\n        options: options,\n        visible: true,\n        getPopupContainer: getPopupContainer\n      }, React.createElement(\"span\", null, measurePrefix))), value.slice(measureLocation + measurePrefix.length)));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, prevState) {\n      var newState = {};\n\n      if ('value' in props && props.value !== prevState.value) {\n        newState.value = props.value || '';\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Mentions;\n}(React.Component);\n\nMentions.Option = Option;\nMentions.defaultProps = {\n  prefixCls: 'rc-mentions',\n  prefix: '@',\n  split: ' ',\n  validateSearch: defaultValidateSearch,\n  filterOption: defaultFilterOption,\n  notFoundContent: 'Not Found',\n  rows: 1\n};\nexport default Mentions;"]},"metadata":{},"sourceType":"module"}